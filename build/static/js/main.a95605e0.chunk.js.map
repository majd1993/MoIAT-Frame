{"version":3,"sources":["WebChat.js","MinimizableWebChat.js","App.js","serviceWorker.js","index.js"],"names":["WebChat","className","onFetchToken","store","token","directLine","useMemo","createDirectLine","styleSet","createStyleSet","userAvatarBackgroundColor","botAvatarBackgroundColor","bubbleBackground","bubbleFromUserBackground","botAvatarInitials","userAvatarInitials","backgroundColor","bubbleBorderRadius","bubbleFromUserBorderRadius","bubbleTextColor","bubbleFromUserTextColor","suggestedActionBorderColor","suggestedActionBorderRadius","suggestedActionBackground","suggestedActionDisabledTextColor","suggestedActionTextColor","sendBoxTextColor","avatarSize","useState","response","setResponse","loading","setLoading","setTimeout","useEffect","style","width","height","opacity","background","position","zIndex","type","left","top","color","textAlign","cardActionMiddleware","next","a","cardAction","getSignInUrl","value","MinimizableWebChat","createStore","dispatch","action","payload","name","language","setToken","handleFetchToken","useCallback","fetch","method","headers","res","text","substring","length","Typography","App","props","state","React","Component","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"ktBA4KeA,EA5IC,SAAC,GAAsF,IAApFC,EAAmF,EAAnFA,UAAWC,EAAwE,EAAxEA,aAAcC,EAA0D,EAA1DA,MAAOC,EAAmD,EAAnDA,MAE3CC,EAAaC,mBAAQ,kBAAMC,2BAAiB,CAAEH,YAAU,CAACA,IA8BzDI,EAAWF,mBACf,kBACEG,yBAAe,CACbC,0BAA2B,mBAC3BC,yBAA0B,0BAC1BC,iBAAkB,UAClBC,yBAA0B,UAC1BC,kBAAmB,MACnBC,mBAAoB,OACpBC,gBAAiB,UACjBC,mBAAoB,sBACpBC,2BAA4B,sBAC5BC,gBAAiB,UACjBC,wBAAyB,QACzBC,2BAA4B,UAC5BC,4BAA6B,sBAC7BC,0BAA2B,UAC3BC,iCAAkC,QAClCC,yBAA0B,UAC1BC,iBAAkB,UAClBC,WAAY,OAEhB,IASF,EAAgCC,mBAAS,WAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA8BF,oBAAS,GAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KAsBA,OApBAC,YAAW,WACTD,GAAW,KACV,KAYHE,qBAAU,WACRhC,MACC,CAACA,IAKF,oCACG6B,GACC,yBAAKI,MAAO,CAAEC,MAAO,OAAQC,OAAQ,OAAQC,QAAS,MAAOC,WAAY,OAAQC,SAAU,QAASC,OAAQ,SAC1G,kBAAC,IAAD,CACEC,KAAM,kBACNP,MAAO,CAAEK,SAAU,QAASG,KAAM,MAAOC,IAAK,MAAOR,MAAO,OAAQC,OAAQ,UAE9E,uBAAGF,MAAO,CAAEK,SAAU,QAASK,MAAO,UAAWD,IAAK,MAAOR,MAAO,OAAQU,UAAW,WAAvF,yCAKH1C,GACC,kBAAC,IAAD,CACEH,UAAS,UAAKA,GAAa,GAAlB,qBAA8C,YAAb4B,EAAyB,QAAU,IAC7ExB,WAAYA,EACZF,MAAOA,EACPK,SAAUA,EAEVuC,qBAtGqB,kBAAM,SAAAC,GAAI,8CAAI,mCAAAC,EAAA,6DAASC,EAAT,EAASA,WAAYC,EAArB,EAAqBA,aACtDT,EAAgBQ,EAAhBR,KAAMU,EAAUF,EAAVE,MAKD,WAATV,GAA+B,YAAVU,EAIvBtB,EAAY,WAGI,WAATY,GAA+B,+CAAVU,GAI5BtB,EAAY,8CAjB2B,kBAqBlCkB,EAAK,CAAEE,aAAYC,kBArBe,2CAAJ,4DC6D1BE,G,gBArFY,WAEzB,IAAMlD,EAAQG,mBACZ,kBACEgD,sBAAY,IAAI,gBAAGC,EAAH,EAAGA,SAAH,OAAkB,SAAAP,GAAI,OAAI,SAAAQ,GAkBxC,MAjBoB,kCAAhBA,EAAOd,MACTa,EAAS,CACPb,KAAM,sBACNe,QAAS,CACPC,KAAM,eACNN,MAAO,CACLO,SAAU,gCAWXX,EAAKQ,UAEhB,IAGF,EAA0B5B,qBAA1B,mBAAOxB,EAAP,KAAcwD,EAAd,KAKMC,EAAmBC,sBAAW,sBAAC,8BAAAb,EAAA,yDAC9B7C,EAD8B,gCAGf2D,MAChB,8CACA,CACEC,OAAQ,MACRC,QAAS,CACP,cAAiB,0EARU,cAG3BC,EAH2B,gBAWfA,EAAIC,OAXW,OAW7B/D,EAX6B,OAajC6B,YAAW,WACT2B,EAASxD,EAAMgE,UAAU,EAAGhE,EAAMiE,OAAS,MAC1C,KAf8B,2CAiBlC,CAACT,EAAUxD,IAEd,OACE,yBAAKH,UAAW,wBACd,yBAAKA,UAAW,YACd,gCACGG,GACC,kBAACkE,EAAA,EAAD,CAAYrE,UAAW,gBACpB,iBAiBP,kBAAC,EAAD,CACEA,UAAW,iBACXC,aAAc2D,EACd1D,MAAOA,EACPC,MAAOA,QCpEFmE,G,0DAhBb,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,GAHI,E,0CAQnB,WACE,OACI,yBAAKxE,UAAU,OACb,kBAAC,EAAD,W,GAZQyE,IAAMC,YCOJC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MAAM,2DCXnCC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,SDoH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,iB","file":"static/js/main.a95605e0.chunk.js","sourcesContent":["// import React, { useEffect, useMemo } from 'react';\nimport ReactWebChat, { createDirectLine, createStyleSet } from 'botframework-webchat';\nimport React, { useState, useEffect, useMemo } from \"react\";\n// import socketIOClient from \"socket.io-client\";\nimport './WebChat.css';\nimport './custom.css'\n\nimport ReactLoading from \"react-loading\";\n\n//import * as adaptiveCardsPackage from 'adaptivecards';\n\n/* adaptiveCardsPackage.AdaptiveCard.onParseElement = element => {\n\n  console.log('element ', element)\n  if (element.id && element.id === 'first_password') {\n    console.log('changed')\n  }\n}; */\n\n/* adaptiveCardsPackage.AdaptiveCard.onParseAction = action => {\n  // const card = action.getActionById(\"openurl\")\n  // card.on\n  console.log('action ', action)\n  if (action.id && action.id === 'openurl') {\n    //action.addEventListener(\"click\", (console.log('kkk')));\n    console.log(' clickkked 2')\n    //action.onExecute(console.log(' clickkked 3'))\n  }\n}; */\n\n// const ENDPOINT = \"https://ministryofindustry.azurewebsites.net/\"\n\nconst WebChat = ({ className, onFetchToken, store, token,/* handleSwitchWhenLanguageIsChosen */ }) => {\n\n  const directLine = useMemo(() => createDirectLine({ token }), [token]);\n  // We are adding a new middleware to handle card action\n  const cardActionMiddleware = () => next => async ({ cardAction, getSignInUrl }) => {\n    const { type, value } = cardAction;\n\n    // console.log('cardAction', cardAction)\n    // console.log('getSignInUrl', getSignInUrl)\n\n    if (type === 'imBack' && value === 'English') {\n      //console.log('openUrl: ', type)\n      //console.log('supportteam: ', value)\n\n      setResponse('English');\n      //handleSwitchWhenLanguageIsChosen('right')\n    }\n    else if (type === 'imBack' && value === 'العربية') {\n      //console.log('openUrl: ', type)\n      //console.log('supportteam: ', value)\n\n      setResponse('العربية');\n      //handleSwitchWhenLanguageIsChosen('left')\n    }\n\n    return next({ cardAction, getSignInUrl });\n  }\n\n  //const [language, setLanguage] = useState(\"\"); \n  //.webchat--css-iyfsm-rctxl4.webchat__stacked-layout.webchat__stacked-layout--from-user .webchat__stacked-layout__message-row\n  //.webchat--css-iyfsm-rctxl4.webchat__stacked-layout .webchat__stacked-layout__message-row\n\n  const styleSet = useMemo(\n    () =>\n      createStyleSet({\n        userAvatarBackgroundColor: 'rgb(105,105,105)',\n        botAvatarBackgroundColor: 'rgba(193, 52, 52, 0.93)',\n        bubbleBackground: '#E0E0E0',\n        bubbleFromUserBackground: '#141726',\n        botAvatarInitials: 'Bot',\n        userAvatarInitials: 'User',\n        backgroundColor: '#f5f5f5',\n        bubbleBorderRadius: \"20px 20px 20px 20px\",\n        bubbleFromUserBorderRadius: \"20px 20px 20px 20px\",\n        bubbleTextColor: '#070707',\n        bubbleFromUserTextColor: \"white\",\n        suggestedActionBorderColor: '#D4B678',\n        suggestedActionBorderRadius: \"20px 20px 20px 20px\",\n        suggestedActionBackground: '#D4B678',\n        suggestedActionDisabledTextColor: 'white',\n        suggestedActionTextColor: \"#ffffff\",\n        sendBoxTextColor: '#000000',\n        avatarSize: 40,\n      }),\n    []\n  );\n\n  /* styleSet.textContent = {\n    ...styleSet.textContent,\n    fontFamily: \"'Comic Sans MS', 'Arial', sans-serif\",\n    fontWeight: 'bold'\n  } */\n\n  const [response, setResponse] = useState('English');\n  const [loading, setLoading] = useState(true);\n\n  setTimeout(() => {\n    setLoading(false)\n  }, 8000);\n  \n  /* useEffect(() => {\n    const socket = socketIOClient(ENDPOINT);\n    socket.on(\"language\", data => {\n      console.log(\"wessel\")\n      console.log(data)\n      setResponse(data);\n      //if else\n    });\n  }, []); */\n\n  useEffect(() => {\n    onFetchToken();\n  }, [onFetchToken]);\n\n  //console.log('response', response)\n\n  return (\n    <>\n      {loading &&\n        <div style={{ width: '100%', height: '100%', opacity: '0.7', background: 'gray', position: 'fixed', zIndex: '1000' }}>\n          <ReactLoading\n            type={'spinningBubbles'}\n            style={{ position: 'fixed', left: '44%', top: '44%', width: '40px', height: '40px', }}\n          />\n          <p style={{ position: 'fixed', color: '#000000', top: '50%', width: '100%', textAlign: 'center' }}>\n            Please wait while we are connecting.\n          </p>\n        </div>\n      }\n      {token &&\n        <ReactWebChat\n          className={`${className || ''} web-chat ${response !== 'English' ? 'roula' : ''}`}\n          directLine={directLine}\n          store={store}\n          styleSet={styleSet}\n          //adaptiveCardsPackage={adaptiveCardsPackage}\n          cardActionMiddleware={cardActionMiddleware}\n        />}\n    </>\n  )\n\n  /* return token ? (\n    //<ReactWebChat className={`${className || ''} web-chat ${response.language !== 'English' ? 'roula' : ''}`} directLine={directLine} store={store} styleSet={styleSet} /> // left to right\n    <>\n      {loading &&\n        <div style={{ width: '100%', height: '100%', opacity: '0.3', background: 'gray', position: 'fixed', zIndex: '1000' }}>\n          <ReactLoading type={'spinningBubbles'} color=\"#fff\" style={{position: 'fixed',left: '47%', top: '48%',width: '40px', height: '40px', }}/>\n        </div>\n      }\n      <ReactWebChat\n        className={`${className || ''} web-chat ${response !== 'English' ? 'roula' : ''}`}\n        directLine={directLine}\n        store={store}\n        styleSet={styleSet}\n        //adaptiveCardsPackage={adaptiveCardsPackage}\n        cardActionMiddleware={cardActionMiddleware}\n      />\n    </>\n  ) : (\n    <div className={`${className || ''} connect-spinner`}>\n      <div className=\"content\">\n        <div className=\"icon\">\n          <span className=\"ms-Icon ms-Icon--Robot\" />\n        </div>\n        <p>Please wait while we are connecting.</p>\n      </div>\n    </div>\n  ); */\n};\n\nexport default WebChat;\n","// import classNames from 'classnames';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { createStore, /* createStyleSet */ } from 'botframework-webchat';\nimport Typography from '@material-ui/core/Typography';\n\nimport WebChat from './WebChat';\n\n// import MessageCloud from './message-cloud.png';\n\nimport './fabric-icons-inline.css';\nimport './MinimizableWebChat.css';\n\nconst MinimizableWebChat = () => {\n\n  const store = useMemo(\n    () =>\n      createStore({}, ({ dispatch }) => next => action => {\n        if (action.type === 'DIRECT_LINE/CONNECT_FULFILLED') {\n          dispatch({\n            type: 'WEB_CHAT/SEND_EVENT',\n            payload: {\n              name: 'webchat/join',\n              value: {\n                language: 'window.navigator.language'\n              }\n            }\n          });\n        }\n        /* else if (action.type === 'DIRECT_LINE/INCOMING_ACTIVITY') {\n          if (action.payload.activity.from.role === 'bot') {\n            // setNewMessage(true);\n          }\n        } */\n\n        return next(action);\n      }),\n    []\n  );\n\n  const [token, setToken] = useState();\n\n  // To learn about reconnecting to a conversation, see the following documentation:\n  // https://docs.microsoft.com/en-us/azure/bot-service/rest-api/bot-framework-rest-direct-line-3-0-reconnect-to-conversation?view=azure-bot-service-4.0\n\n  const handleFetchToken = useCallback(async () => {\n    if (!token) {\n      // const res = await fetch('https://e-councilhr.azurewebsites.net/directline/token', { method: 'POST' }, { mode: 'no-cors'});\n      const res = await fetch(\n        'https://webchat.botframework.com/api/tokens',\n        {\n          method: 'GET',\n          headers: {\n            'Authorization': 'BotConnector KxH5mTB3KH0.GOS2JFASIiLQlZttpBQUsxBmHjn-SbtS73Q7gKlh8ZA',\n          }\n        });\n      let token = await res.text();\n\n      setTimeout(() => {\n        setToken(token.substring(1, token.length - 1));\n      }, 1000);\n    }\n  }, [setToken, token]);\n\n  return (\n    <div className={\"minimizable-web-chat\"}>\n      <div className={'chat-box'}>\n        <header>\n          {token &&\n            <Typography className={'header-title'} >\n              {'Chat with us'}\n            </Typography>\n          }\n          {/* <div>\n            <img\n              src={MessageCloud}\n              alt={''}\n              className={'header-icon'}\n            />\n          </div>\n          <Typography className={'header-title'} >\n            {'Hazza'}\n          </Typography> */}\n          {/* <Typography className={classes.title2} >\n            {'Your MoIAT Digital Assistant'}\n          </Typography> */}\n        </header>\n        <WebChat\n          className={'react-web-chat'}\n          onFetchToken={handleFetchToken}\n          store={store}\n          token={token}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MinimizableWebChat;\n","import React from 'react';\nimport MinimizableWebChat from './MinimizableWebChat';\n\nimport './App.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n    }\n  }\n\n\n  render() {\n    return (\n        <div className=\"App\">\n          <MinimizableWebChat />\n        </div>\n    )\n  }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}